<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout}">

<head>
    <th:block layout:fragment="head">
        <title>Nuevo Cliente</title>
    </th:block>
</head>

<body>
    <div layout:fragment="content">
        <div class="container mt-4">
            <h3>Registrar Nuevo Cliente</h3>
            <form th:action="@{/cliente/save}" method="post">
                <div class="mb-3">
                    <label>Tipo de Cliente:</label>
                    <select name="tipo" class="form-select" id="tipoCliente" onchange="toggleCampos()">
                        <option value="NATURAL">Natural</option>
                        <option value="JURIDICO">Jurídico</option>
                    </select>
                </div>

                <!-- Campos para cliente natural -->
                <div id="naturalFields">
                    <div class="mb-3">
                        <label>DNI:</label>
                        <input type="text" name="dni" class="form-control" pattern="\d{8}" minlength="8" maxlength="8"
                            oninput="this.value=this.value.replace(/[^0-9]/g,'')" title="Ingrese 8 dígitos numéricos">
                    </div>
                    <div class="mb-3">
                        <label>Nombres:</label>
                        <input type="text" name="nombres" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label>Apellidos:</label>
                        <input type="text" name="apellidos" class="form-control">
                    </div>
                </div>

                <!-- Campos para cliente jurídico -->
                <div id="juridicoFields" style="display: none;">
                    <div class="mb-3">
                        <label>RUC:</label>
                        <input type="text" name="ruc" class="form-control" pattern="\d{11}" minlength="11"
                            maxlength="11" oninput="this.value=this.value.replace(/[^0-9]/g,'')"
                            title="Ingrese 11 dígitos numéricos">
                    </div>
                    <div class="mb-3">
                        <label>Razón Social:</label>
                        <input type="text" name="razonSocial" class="form-control">
                    </div>
                    <div class="mb-3">
                        <label>Nombre Comercial:</label>
                        <input type="text" name="nombreComercial" class="form-control">
                    </div>
                </div>


                <div class="mb-3">
                    <label>Dirección:</label>
                    <input type="text" name="direccion" class="form-control">
                </div>
                <div class="mb-3">
                    <label>Teléfono:</label>
                    <input type="text" name="telefono" class="form-control">
                </div>
                <div class="mb-3">
                    <label>Correo:</label>
                    <input type="email" name="correo" class="form-control">
                </div>
                <div class="mb-3">
                    <label>Categoría:</label>
                    <select name="idCategoriaCliente" class="form-select">
                        <option th:each="c : ${categorias}" th:value="${c.idCategoria}" th:text="${c.nombre}">
                        </option>
                    </select>
                </div>


                <button type="submit" class="btn btn-success">Guardar</button>
                <a th:href="@{/cliente}" class="btn btn-secondary">Cancelar</a>
            </form>
        </div>
    </div>


    <th:block layout:fragment="js">
        <!-- Scripts opcionales -->
        <script>
            function toggleCampos() {
                var tipo = document.getElementById("tipoCliente").value;
                document.getElementById("naturalFields").style.display = tipo === "NATURAL" ? "block" : "none";
                document.getElementById("juridicoFields").style.display = tipo === "JURIDICO" ? "block" : "none";
            }
        </script>
    </th:block>

</body>

</html>